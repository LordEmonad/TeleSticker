/* TeleSticker v2 â€” Emoji Picker */

const EmojiPicker = {
    _callback: null,
    _emojis: [
        // Smileys
        'ðŸ˜€','ðŸ˜ƒ','ðŸ˜„','ðŸ˜','ðŸ˜†','ðŸ˜…','ðŸ¤£','ðŸ˜‚','ðŸ™‚','ðŸ˜‰','ðŸ˜Š','ðŸ˜‡','ðŸ¥°','ðŸ˜','ðŸ¤©','ðŸ˜˜',
        'ðŸ˜—','ðŸ˜š','ðŸ˜‹','ðŸ˜›','ðŸ˜œ','ðŸ¤ª','ðŸ˜','ðŸ¤‘','ðŸ¤—','ðŸ¤­','ðŸ¤«','ðŸ¤”','ðŸ¤','ðŸ¤¨','ðŸ˜','ðŸ˜‘',
        'ðŸ˜¶','ðŸ˜','ðŸ˜’','ðŸ™„','ðŸ˜¬','ðŸ¤¥','ðŸ˜Œ','ðŸ˜”','ðŸ˜ª','ðŸ¤¤','ðŸ˜´','ðŸ˜·','ðŸ¤’','ðŸ¤•','ðŸ¤¢','ðŸ¤®',
        // Gestures
        'ðŸ‘‹','ðŸ¤š','ðŸ–','âœ‹','ðŸ––','ðŸ‘Œ','ðŸ¤Œ','ðŸ¤','âœŒï¸','ðŸ¤ž','ðŸ¤Ÿ','ðŸ¤˜','ðŸ¤™','ðŸ‘ˆ','ðŸ‘‰','ðŸ‘†',
        'ðŸ‘‡','â˜ï¸','ðŸ‘','ðŸ‘Ž','âœŠ','ðŸ‘Š','ðŸ¤›','ðŸ¤œ','ðŸ‘','ðŸ™Œ','ðŸ‘','ðŸ¤²','ðŸ¤','ðŸ™',
        // Hearts & Symbols
        'â¤ï¸','ðŸ§¡','ðŸ’›','ðŸ’š','ðŸ’™','ðŸ’œ','ðŸ–¤','ðŸ¤','ðŸ¤Ž','ðŸ’”','â£ï¸','ðŸ’•','ðŸ’ž','ðŸ’“','ðŸ’—','ðŸ’–',
        'ðŸ’˜','ðŸ’','â­','ðŸŒŸ','âœ¨','ðŸ’«','ðŸ”¥','ðŸ’¯','ðŸ’¢','ðŸ’¥','ðŸ’¦','ðŸ’¨',
        // Animals
        'ðŸ¶','ðŸ±','ðŸ­','ðŸ¹','ðŸ°','ðŸ¦Š','ðŸ»','ðŸ¼','ðŸ¨','ðŸ¯','ðŸ¦','ðŸ®','ðŸ·','ðŸ¸','ðŸµ','ðŸ”',
        'ðŸ§','ðŸ¦','ðŸ¤','ðŸ¦†','ðŸ¦…','ðŸ¦‰','ðŸ¦‡','ðŸº','ðŸ—','ðŸ´','ðŸ¦„','ðŸ','ðŸ¦‹','ðŸŒ','ðŸž',
        // Food
        'ðŸŽ','ðŸ','ðŸŠ','ðŸ‹','ðŸŒ','ðŸ‰','ðŸ‡','ðŸ“','ðŸ«','ðŸˆ','ðŸ’','ðŸ‘','ðŸ¥­','ðŸ','ðŸ¥¥','ðŸ¥',
        'ðŸ…','ðŸ†','ðŸ¥‘','ðŸ¥¦','ðŸ¥¬','ðŸ¥’','ðŸŒ¶','ðŸ«‘','ðŸŒ½','ðŸ¥•','ðŸ§„','ðŸ§…','ðŸ¥”','ðŸ ',
        // Objects
        'âš½','ðŸ€','ðŸˆ','âš¾','ðŸ¥Ž','ðŸŽ¾','ðŸ','ðŸ‰','ðŸ¥','ðŸŽ±','ðŸ“','ðŸ¸','ðŸ’','ðŸ¥Š','ðŸŽ¯','ðŸŽ®',
        'ðŸŽ°','ðŸŽ²','ðŸ§©','ðŸŽ­','ðŸŽ¨','ðŸŽ¬','ðŸŽ¤','ðŸŽ§','ðŸŽ¼','ðŸŽµ','ðŸŽ¶','ðŸŽ¹','ðŸ¥','ðŸŽ·','ðŸŽº','ðŸŽ¸',
        // Misc
        'ðŸŽ','ðŸŽ€','ðŸŽ‚','ðŸŽ„','ðŸŽƒ','ðŸŽ†','ðŸŽ‡','ðŸ§¨','âœˆï¸','ðŸš€','ðŸ›¸','ðŸŒˆ','â˜€ï¸','ðŸŒ™','âš¡','â„ï¸',
        'ðŸŒŠ','ðŸŒ¸','ðŸŒº','ðŸŒ»','ðŸŒ¹','ðŸ€','ðŸŒ¿','ðŸŒ±','ðŸŒ´','ðŸŒ³','ðŸ','ðŸ‚','ðŸŽ‹','ðŸŽ',
    ],

    init() {
        this._grid = document.getElementById('emojiGrid');
        this._modal = document.getElementById('emojiModal');

        document.getElementById('closeEmojiBtn')?.addEventListener('click', () => this.close());
        this._modal?.addEventListener('click', (e) => {
            if (e.target === this._modal) this.close();
        });

        this._buildGrid();
    },

    _buildGrid() {
        if (!this._grid) return;
        this._grid.innerHTML = '';
        this._emojis.forEach(emoji => {
            const btn = Utils.el('button', {
                text: emoji,
                class: 'emoji-tag',
                style: { fontSize: '1.3rem', padding: '6px', border: 'none', cursor: 'pointer', background: 'transparent' },
                onClick: () => {
                    if (this._callback) this._callback(emoji);
                    this.close();
                },
            });
            this._grid.appendChild(btn);
        });
    },

    open(callback) {
        this._callback = callback;
        this._modal.classList.add('active');
    },

    close() {
        this._modal.classList.remove('active');
        this._callback = null;
    },
};
